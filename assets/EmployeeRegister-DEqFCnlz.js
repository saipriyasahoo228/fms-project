import{r as t,_ as ue,R,b as V,c as pe,P as z,o as ve,j as e,C as be}from"./index-K7U7e95_.js";import{C as fe,a as Ee}from"./CRow-LYjhne1_.js";import{C as ye,a as xe}from"./CCardBody-C620NmE7.js";import{C as Ne}from"./CCardHeader-CUzYKSJp.js";import{c as K,a as i,b as d,C as F}from"./CFormInput-DBKKNPl3.js";import{a as ge}from"./index.es-CjQ7tfi7.js";var P=t.forwardRef(function(a,h){var n,u=a.children,x=a.className,p=a.feedback,N=a.feedbackInvalid,c=a.feedbackValid,g=a.floatingClassName,m=a.floatingLabel,j=a.htmlSize,o=a.id,v=a.invalid,C=a.label,b=a.options,f=a.size,S=a.text,k=a.tooltipFeedback,E=a.valid,y=ue(a,["children","className","feedback","feedbackInvalid","feedbackValid","floatingClassName","floatingLabel","htmlSize","id","invalid","label","options","size","text","tooltipFeedback","valid"]);return R.createElement(K,{describedby:y["aria-describedby"],feedback:p,feedbackInvalid:N,feedbackValid:c,floatingClassName:g,floatingLabel:m,id:o,invalid:v,label:C,text:S,tooltipFeedback:k,valid:E},R.createElement("select",V({id:o,className:pe("form-select",(n={},n["form-select-".concat(f)]=f,n["is-invalid"]=v,n["is-valid"]=E,n),x),size:j},y,{ref:h}),b?b.map(function(r,I){return R.createElement("option",V({},typeof r=="object"&&r.disabled&&{disabled:r.disabled},typeof r=="object"&&r.value!==void 0&&{value:r.value},{key:I}),typeof r=="string"?r:r.label)}):u))});P.propTypes=V({className:z.string,htmlSize:z.number,options:z.array},K.propTypes);P.displayName="CFormSelect";const Pe=()=>{const a=ve(),[h,n]=t.useState("cttc1234"),[u,x]=t.useState(""),[p,N]=t.useState(""),[c,g]=t.useState(""),[m,j]=t.useState(""),[o,v]=t.useState(""),[C,b]=t.useState("1"),[f,S]=t.useState(""),[k,E]=t.useState(""),[y,r]=t.useState(""),[I,A]=t.useState(""),[T,L]=t.useState(""),[w,B]=t.useState(""),[W,$]=t.useState(!1),M=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,Q=/^[0-9]{10}$/,U=/^[A-Za-z0-9, -]{10,}$/,X=s=>{n(s.target.value)},Y=s=>{x(s.target.value)},_=s=>{N(s.target.value)},ee=s=>{g(s.target.value)},ae=s=>{j(s.target.value)},se=s=>{v(s.target.value)},te=s=>{b(s.target.value)},q=()=>h?(S(""),!0):(S("White Level Id is required"),!1),D=()=>u?(E(""),!0):(E("Employee Id is required"),!1),H=()=>p?(r(""),!0):(r("Employee Name is required"),!1),O=()=>c&&!M.test(c)?(A("Enter a valid email address"),!1):(A(""),!0),J=()=>{if(m){if(!Q.test(m))return L("Enter a valid 10-digit phone number"),!1}else return L("Phone Number is required"),!1;return L(""),!0},Z=()=>o&&!U.test(o)?(B("Enter a valid address (at least 10 characters, numbers, commas, and hyphens are allowed)"),!1):(B(""),!0),re=async s=>{s.preventDefault();const le=q(),ne=D(),oe=H(),ie=O(),de=J(),ce=Z();if(le&&ne&&oe&&ie&&de&&ce){$(!0);let G={employee_id:u,employee_name:p,email:c,phonenumber:m,address:o,whitelevel_id:h,role:C};console.log("formData:",G);try{const l=await fetch("http://192.168.0.166:8000/employee/register/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(G)});if(!l.ok){console.error(`HTTP error! status: ${l.status}`);const he=await l.json();throw console.error("Response body:",he),new Error(`Failed to fetch: ${l.statusText}`)}const me=await l.json();console.log("Success:",me),alert("Registration successful!"),a("/login"),n("cttc1234"),x(""),N(""),g(""),j(""),v(""),b("1")}catch(l){l.name==="TypeError"?console.error("Network error: Please check if the server is running and accessible."):console.error("Error:",l),alert(`Error: ${l.message}`)}finally{$(!1)}}};return e.jsx("form",{onSubmit:re,children:e.jsx(fe,{className:"justify-content-center",children:e.jsx(Ee,{xs:8,children:e.jsxs(ye,{className:"mb-4",children:[e.jsx(Ne,{children:e.jsx("strong",{children:"Employee Registration Form"})}),e.jsxs(xe,{children:[e.jsxs(i,{className:"mb-3",children:[e.jsx(P,{id:"whiteLevelId",value:h,onChange:X,onBlur:q,invalid:!!f,children:e.jsx("option",{value:"cttc1234",children:"cttc1234"})}),e.jsx(d,{htmlFor:"whiteLevelId",children:"Company Registration Number"}),e.jsx("div",{className:"invalid-feedback",children:f})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx(F,{type:"text",id:"employeeId",placeholder:"Enter Employee Id",value:u,onChange:Y,onBlur:D,invalid:!!k}),e.jsx(d,{htmlFor:"employeeId",children:"Enter Employee Id"}),e.jsx("div",{className:"invalid-feedback",children:k})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx(F,{type:"text",id:"employeeName",placeholder:"Enter Employee Name",value:p,onChange:_,onBlur:H,invalid:!!y}),e.jsx(d,{htmlFor:"employeeName",children:"Enter Employee Name"}),e.jsx("div",{className:"invalid-feedback",children:y})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx(F,{type:"text",id:"employeeEmail",placeholder:"Enter Employee Email",value:c,onChange:ee,onBlur:O,invalid:!!I}),e.jsx(d,{htmlFor:"employeeEmail",children:"Enter Employee Email"}),e.jsx("div",{className:"invalid-feedback",children:I})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx(F,{type:"text",id:"phoneNumber",placeholder:"Enter Phone Number",value:m,onChange:ae,onBlur:J,invalid:!!T}),e.jsx(d,{htmlFor:"phoneNumber",children:"Enter Phone Number"}),e.jsx("div",{className:"invalid-feedback",children:T})]}),e.jsxs(i,{className:"mb-3",children:[e.jsx("textarea",{className:`form-control ${w?"is-invalid":""}`,id:"address",placeholder:"Enter Address",style:{height:"100px"},value:o,onChange:se,onBlur:Z}),w&&e.jsx("div",{className:"invalid-feedback",children:w}),e.jsx(d,{htmlFor:"address",children:"Enter Address"})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(P,{id:"role",value:C,onChange:te,children:[e.jsx("option",{value:"1",children:"Employee"}),e.jsx("option",{value:"2",children:"Supervisor"})]}),e.jsx(d,{htmlFor:"role",children:"Select Role"})]}),e.jsx("div",{style:{textAlign:"center"},children:e.jsx(ge,{type:"submit",color:"primary",shape:"rounded-pill",disabled:W,children:W?e.jsx(be,{size:"sm"}):"Submit"})})]})]})})})})};export{Pe as default};
